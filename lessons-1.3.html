<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <title>Unreal1</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css"/>
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Aclonica"
    />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Allerta"
    />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css?family=Roboto"
    />
    <link rel="stylesheet" href="assets/css/-Team-Rotating-Cards-BS4-.css"/>
    <link rel="stylesheet" href="assets/css/Navigation-Clean.css"/>
    <link rel="stylesheet" href="assets/css/News-Cards.css"/>
    <link rel="stylesheet" href="assets/css/Responsive-Youtube-Embed.css"/>
    <link rel="stylesheet" href="assets/css/styles.css"/>
</head>
<body>
<div>
    <nav
            class="navbar navbar-light navbar-expand-md navigation-clean"
            style="background-color: rgb(255, 255, 255)"
    >
        <div class="container">
            <a
                    class="navbar-brand"
                    href="index.html"
                    style="color: rgba(0, 0, 0, 0.9); font-family: Roboto, sans-serif"
            >
                <img
                        src="assets/img/unreal-engine-icon-27.jpg.png"
                        style="width: 76px"
                />Уроки Unreal Engine</a
            >
            <button
                    class="navbar-toggler"
                    data-toggle="collapse"
                    data-target="#navcol-1"
            >
            <span class="sr-only">Toggle navigation</span
            ><span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="nav navbar-nav ml-auto">
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" href="index.html"> Главная </a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link" href="lessons.html"> Уроки </a>
                    </li>
                    <li class="nav-item" role="presentation">
                        <a class="nav-link" href="about.html">О разработке</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>
<div class="container">
    <p class="py-5"></p>
    <!-- <span>
      15 мая 2020
  </span> -->
    <h1 class="text-center text-uppercase">УРОК 3 - Анимации</h1>
    <div class="py-5"></div>
    <ul class="list-group">
        <li class="list-group-item">
            <a href="#down1" class="btn btn-primary stretched-link shirt">
                1. Загрузка персонажей с помощью Mixamo
            </a>
        </li>
        <li class="list-group-item">
            <a href="#down2" class="btn btn-primary stretched-link shirt">
                2. Настройка объекта BP_Player
            </a>
        </li>
        <li class="list-group-item">
            <a href="#down3" class="btn btn-primary stretched-link shirt">
                3. Загрузка анимаций
            </a>
        </li>
        <li class="list-group-item">
            <a href="#down4" class="btn btn-primary stretched-link shirt">
                4. Настройка анимаций
            </a>
        </li>
    </ul>
    <p class="py-5"></p>
    <h2>
        <a name="down1"> 1. Загрузка персонажей с помощью Mixamo </a>
    </h2>
    <br/>
    <ui>
        <li class="shirt">
            Перейдите на сайт Mixamo.com и выполните вход, указав свой Adobe ID
            (обычно это ваш адрес электронной почты) и пароль.
        </li>
        <li class="shirt">
            Для просмотра, выбора и загрузки персонажа нажмите кнопку Отправить
            персонаж на панели редактирования.
        </li>
    </ui>
    <div class="help-note">
        <p class="shirt">
            <span> Примечание. </span>
        </p>
        <p class="shirt">
            Файл должен быть в формате .fbx. При создании файла в формате .fbx для
            встраивания текстур убедитесь, что включен параметр
            <strong>Встроить медиаданные</strong>.
        </p>
    </div>
    <h2>Отображение оснащенного персонажа</h2>
    <p class="shirt">
        Скелет оснащенных персонажей будет автоматически отображаться в систему
        Mixamo, что позволяет применять анимации к пользовательскому скелету
        [1].
    </p>
    <div class="py-5"></div>
    <p class="shirt">Для начало выбираем любой Mesh который нам подойдет.</p>
    <br/>
    <div class="text-center">
        <a href="assets/img/гиф1.gif" target="_blank">
            <img
                    src="assets/img/гиф1.gif"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 1 - Загрузка игрового Mesh</p>
    <br/>
    <p class="shirt">
        Имортироуем данный Mesh в движок. Нажимаем в
        <kbd>content browser</kbd> на <kbd>Import</kbd> и находим загруженный
        .fbx фаил. Ставив галочки в <kbd>Use TO As Ref Pose</kbd> а также в
        списке <kbd>Normal Import Method</kbd> выстовляем
        <kbd>Import Normals and Tangents</kbd> а также убираем галочку иморт
        анимаций <kbd>Import Animations</kbd>.
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок5.png" target="_blank">
            <img
                    src="assets/img/снимок5.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 2 - Импорт игрового Mesh</p>
    <br/>
    <p class="shirt">
        Mesh появится в <kbd>content browser</kbd> и будет полностью доступен
        после компиляции шейдеров.
    </p>
    <p class="py-5"></p>
    <h2>
        <a name="down2"> 2. Настройка объекта BP_Player </a>
    </h2>
    <br/>
    <p class="shirt">
        Переходим в класс <kbd>BP_Player</kbd> открываем
        <kbd>Viewport</kbd> выбираем компонент Mesh во вкладке Details Находим
        пункт <kbd>Skeletal Mesh</kbd> выбираем импортированный Mesh
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/гиф2.gif" target="_blank">
            <img
                    src="assets/img/гиф2.gif"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 3 - Выстовленный Mesh</p>
    <br/>
    <p class="shirt">
        После любых действий в классе нажимаем кнопку
        <kbd>Compile</kbd>
    </p>
    <p class="shirt">
        На данный момент вид является от первого лица. Чтоб это изменить в
        классе <kbd>BP_Player</kbd> Добавим следующие два компонента:
    </p>
    <ul>
        <li class="shirt">SpringArm</li>
        <li class="shirt">Camera</li>
    </ul>
    <p class="shirt">
        Сделать это нужно таким образом чтобы компонент
        <kbd>SpringArm</kbd> был дочерним компонентом <kbd> Camera</kbd> Так же
        в свойствах <kbd>SpringArm</kbd> выстовляем галучку
        <kbd>Use Pawn Control Rotation</kbd>
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок6.png" target="_blank">
            <img
                    src="assets/img/снимок6.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 4 - Вид от 3 лица</p>
    <br/>
    <p class="shirt">
        В классе <kbd>BP_Player</kbd> нужно сделать свободное вращение. Для
        этого в свойствах этого класса ставим галочку на против
        <kbd>Orient Rotation to Movement</kbd> а также снимаег ограничение оси
        Z. Делается это снятием галочки на против
        <kbd>Use Controller Rotation Yav</kbd>. После этих манипуляций возникнет
        проблема с управлением. Связоно это с получением векторов в сторону
        которую смотрит персонаж. Поэтому blueprint code данного класса
        необходимо изменить. Необходимо получить значение векторов относительно
        вращения. Сделать это можно следующим образом
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок7.png" target="_blank">
            <img
                    src="assets/img/снимок7.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 5 - Переращет векторов</p>
    <br/>

    <p class="py-5"></p>
    <h2>
        <a name="down3"> 3. Загрузка анимаций </a>
    </h2>
    <br/>

    <p class="shirt">
        Сервис миксамо позволяет загрузить анимации к нашему скелету. Для этого
        перейдем во вкладку Animation и найдем две анимации такие как стоять /
        IDLE и бежать идти / Run Так же при скачивании анимации в пунктах Skin
        выбираем Without Skin и скелет и Mesh у нас есть. Также анимации к Mesh
        лучше подгружать отдельно. И ставим галочку возле In Place где это
        можно. Анимация нужна нам зацикленная
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/гиф3.gif" target="_blank">
            <img
                    src="assets/img/гиф3.gif"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 6 - Загрузка анимаций</p>
    <br/>
    <p class="shirt">
        Импортируем анимации тем же способом и указываем наш скелет.
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок8.png" target="_blank">
            <img
                    src="assets/img/снимок8.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 7 - Импорт анимаций</p>
    <br/>

    <p class="py-5"></p>
    <h2>
        <a name="down4"> 4. Настройка анимаций </a>
    </h2>
    <br/>
    <p class="shirt">Подключение анимации к классу имеет следующую логику.</p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок9.png" target="_blank">
            <img
                    src="assets/img/снимок9.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 8 - План настройки анимаций</p>
    <br/>
    <p class="shirt">Для начало нам нужет AnimBP</p>
    <p class="shirt">
        Animation Blueprint - это специализированный Blueprint, который
        управляет анимацией скелетной сетки. Графики редактируются внутри
        анимации Blueprint Editor, где вы можете выполнять анимацию смешивание,
        непосредственно контролировать кости скелета, или логику установки,
        которая будет в конечном счете определяет окончательные анимации позы
        для скелетной сетки использовать для каждого кадра.
    </p>
    <p class="shirt">Добавим новый класс animation и назовем его Anim_BP</p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок10.png" target="_blank">
            <img
                    src="assets/img/снимок10.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 9 - Создание класса анимаций</p>
    <br/>
    <p class="shirt">
        Указываем наш скелет. В свойствах класса <kbd>BP_Player</kbd> выберем
        компонент Mesh и на панели Details в пункте Anim Class подключаем класс
        <kbd>Anim_BP</kbd> Жмем Compile и переходим в класс <kbd>Anim_BP</kbd>
        К этому классу нам нужен еще одни класс BlendSpace1D создаем его и также
        называем переходим в него. С помощью этого класса мы установим плавный
        переход одной анимации в другую. Maximum Axis Value установим в 300 чем
        выше это значение тем дольше будет происходить переход Number of Grid
        Divisions установим на 2 или на 1. Это точки перехода проигрывание
        анимации. Разместим на них две анимации в ноль ставим IDLE на следующую
        черту RUN
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок11.png" target="_blank">
            <img
                    src="assets/img/снимок11.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 10 - Класс Blend space</p>
    <br/>
    <p class="shirt">
        В Anim_BP напишем логику. Нужно посчитать скорость персонажа. Заходим в
        Event Graph. Создадим переменную speed в левом нижнем углу. Переменная
        должна получить скорость перемещение объекта возьмем скорость и
        посчитаем ее значение дадим переменной. Переменная должна обновляться
        каждый тик. Тик равен 0.01 с.
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок12.png" target="_blank">
            <img
                    src="assets/img/снимок12.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 11 - Event graph</p>
    <br/>
    <p class="shirt">
        Переходим в AnimGraph создадим State Machine. Это позволит объединить
        группу анимации и установить условия переключение. В моем случае это не
        обязательно.
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок13.png" target="_blank">
            <img
                    src="assets/img/снимок13.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 12 - Anim graph</p>
    <br/>
    <p class="shirt">
        Заходим в Stata Machine и создаем State. Назовем его IDLE/RUN. Заходим в
        него. Устанавливаем созданный класс BlendSpace и даем ему значение
        переменной speed.
    </p>
    <br/>
    <div class="text-center">
        <a href="assets/img/снимок14.png" target="_blank">
            <img
                    src="assets/img/снимок14.png"
                    class="img-thumbnail"
                    alt="Открыть оригинал"
            />
        </a>
    </div>
    <p class="text-center shirt">Рисунок 13 - State IDLE/RUN</p>
    <br/>

    <p class="shirt">
        Переключение анимации из неподвижного состояние в состояние бежать
        настроенно.
    </p>
</div>

<div class="container"></div>
<script src="assets/js/jquery.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
